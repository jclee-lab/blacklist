= (% id="H5" %)ğŸ”„ 5. ì—…ê·¸ë ˆì´ë“œ ê°€ì´ë“œ =

{{panel title="**âœ¨ ì´ ì„¹ì…˜ì—ì„œ ë°°ìš¸ ë‚´ìš©**"}}
* â˜‘ï¸ ë¬´ì¤‘ë‹¨ ë¸”ë£¨-ê·¸ë¦° ë°°í¬ ì „ëµ
* â˜‘ï¸ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì ˆì°¨
* â˜‘ï¸ ë¡¤ë°± í”„ë¡œí† ì½œ
* â˜‘ï¸ ë²„ì „ë³„ ë³€ê²½ì‚¬í•­ ë° ì²´í¬ë¦¬ìŠ¤íŠ¸
{{/panel}}

---

== 1ï¸âƒ£ ë¬´ì¤‘ë‹¨ ì—…ë°ì´íŠ¸ ==

=== ğŸŸ¦ğŸŸ© ë¸”ë£¨-ê·¸ë¦° ë°°í¬ ì „ëµ ===

{{info}}
**ğŸ¯ ë¸”ë£¨-ê·¸ë¦° ë°°í¬ ê°œë…**
* **Blue (í˜„ì¬ ë²„ì „)**: ì‹¤ì œ ì„œë¹„ìŠ¤ ì¤‘ì¸ ê¸°ì¡´ ë²„ì „
* **Green (ìƒˆ ë²„ì „)**: ìƒˆë¡œ ë°°í¬í•  ë²„ì „ (ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©)
* **ì¥ì **: ê²€ì¦ í›„ ì „í™˜, ë¬¸ì œ ì‹œ ì¦‰ì‹œ ë¡¤ë°± ê°€ëŠ¥
{{/info}}

{{plantuml}}
@startuml
skinparam backgroundColor white

rectangle "1ï¸âƒ£ ë°°í¬ ì „" {
    card "ğŸŸ¦ Blue v1.0\n:2542\nì„œë¹„ìŠ¤ ì¤‘" as BLUE1 #87CEEB
    cloud "íŠ¸ë˜í”½" as TRAFFIC1 #90EE90
    TRAFFIC1 --> BLUE1
}

rectangle "2ï¸âƒ£ Green ë°°í¬" {
    card "ğŸŸ¦ Blue v1.0\n:2542\nì„œë¹„ìŠ¤ ì¤‘" as BLUE2 #87CEEB
    card "ğŸŸ© Green v1.1\n:2543\nê²€ì¦ ì¤‘" as GREEN2 #90EE90
    cloud "íŠ¸ë˜í”½" as TRAFFIC2 #90EE90
    actor "í…ŒìŠ¤íŠ¸" as TEST
    TRAFFIC2 --> BLUE2
    TEST ..> GREEN2
}

rectangle "3ï¸âƒ£ íŠ¸ë˜í”½ ì „í™˜" {
    card "ğŸŸ¦ Blue v1.0\n:2542\nëŒ€ê¸°" as BLUE3 #D3D3D3
    card "ğŸŸ© Green v1.1\n:2543\nì„œë¹„ìŠ¤ ì¤‘" as GREEN3 #90EE90
    cloud "íŠ¸ë˜í”½" as TRAFFIC3 #90EE90
    TRAFFIC3 --> GREEN3
}

[1ï¸âƒ£ ë°°í¬ ì „] -down-> [2ï¸âƒ£ Green ë°°í¬] : ìƒˆ ë²„ì „ ë°°í¬
[2ï¸âƒ£ Green ë°°í¬] -down-> [3ï¸âƒ£ íŠ¸ë˜í”½ ì „í™˜] : ê²€ì¦ ì™„ë£Œ

note right of GREEN2
    **ê²€ì¦ í•­ëª©**
    â€¢ í—¬ìŠ¤ì²´í¬ í†µê³¼
    â€¢ API í…ŒìŠ¤íŠ¸ í†µê³¼
    â€¢ 30ë¶„ ëª¨ë‹ˆí„°ë§
end note

@enduml
{{/plantuml}}

**ğŸ“‹ ë‹¨ê³„ë³„ ì ˆì°¨:**

{{code language="bash"}}
# 1ï¸âƒ£ í˜„ì¬ ë²„ì „ í™•ì¸ ë° ë°±ì—…
echo "ğŸ“¸ í˜„ì¬ ì‹œìŠ¤í…œ ìŠ¤ëƒ…ìƒ·"
docker-compose ps
docker exec blacklist-postgres pg_dump -U postgres blacklist > \
  /opt/backups/pre_upgrade_$(date +%Y%m%d_%H%M%S).sql
echo "âœ… ë°±ì—… ì™„ë£Œ"

# 2ï¸âƒ£ ìƒˆ ë²„ì „ íŒ¨í‚¤ì§€ ì¤€ë¹„
cd /opt
tar -xzf blacklist-offline-v1.1.0.tar.gz
cd blacklist-offline-v1.1.0/

# 3ï¸âƒ£ í¬íŠ¸ ë³€ê²½ (ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©)
# docker-compose.yml ìˆ˜ì •
sed -i 's/2542:2542/2543:2542/g' docker-compose.yml
sed -i 's/2543:2543/3001:2543/g' docker-compose.yml

# 4ï¸âƒ£ ğŸŸ© Green ë²„ì „ ì‹œì‘
docker-compose up -d
echo "â³ ì´ˆê¸°í™” ëŒ€ê¸° ì¤‘..."
sleep 90

# 5ï¸âƒ£ í—¬ìŠ¤ì²´í¬
echo "ğŸ’š í—¬ìŠ¤ì²´í¬"
curl http://localhost:2543/health | jq
if [ $? -ne 0 ]; then
    echo "âŒ í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨ - ì¤‘ë‹¨"
    exit 1
fi

# 6ï¸âƒ£ ì—°ê¸° í…ŒìŠ¤íŠ¸
echo "ğŸ§ª API í…ŒìŠ¤íŠ¸"
curl "http://localhost:2543/api/blacklist/check?ip=1.2.3.4" | jq
curl "http://localhost:2543/api/stats" | jq

# 7ï¸âƒ£ íŠ¸ë˜í”½ ì „í™˜
echo "ğŸ”€ íŠ¸ë˜í”½ ì „í™˜ (FortiGate ì„¤ì • ë³€ê²½)"
echo "   Backend í¬íŠ¸: 2542 â†’ 2543"
# ìˆ˜ë™ìœ¼ë¡œ ë°©í™”ë²½/ë¡œë“œë°¸ëŸ°ì„œ ì„¤ì • ë³€ê²½

# 8ï¸âƒ£ ëª¨ë‹ˆí„°ë§ (30ë¶„)
echo "ğŸ“Š 30ë¶„ê°„ ëª¨ë‹ˆí„°ë§..."
for i in {1..30}; do
    curl -s http://localhost:2543/health | jq '.status'
    sleep 60
done

# 9ï¸âƒ£ ğŸŸ¦ Blue ë²„ì „ ì¢…ë£Œ (ë¬¸ì œ ì—†ìœ¼ë©´)
echo "ğŸ›‘ êµ¬ ë²„ì „ ì¢…ë£Œ"
cd /opt/blacklist-offline-v1.0.0/
docker-compose down

# ğŸ”Ÿ í¬íŠ¸ ì›ë³µ (ì„ íƒì )
cd /opt/blacklist-offline-v1.1.0/
sed -i 's/2543:2542/2542:2542/g' docker-compose.yml
docker-compose down && docker-compose up -d
{{/code}}

=== ğŸ”™ ë¡¤ë°± ì ˆì°¨ ===

{{warning}}
**âš ï¸ ë¡¤ë°± ê¸°ì¤€ (í•˜ë‚˜ë¼ë„ í•´ë‹¹ ì‹œ ì¦‰ì‹œ ë¡¤ë°±)**
* âŒ í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨
* âŒ API ì—ëŸ¬ìœ¨ > 1%
* âŒ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
* âŒ í•µì‹¬ ê¸°ëŠ¥ ì¥ì•  (í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ë¯¸ì‘ë™)
{{/warning}}

{{code language="bash"}}
# ğŸš¨ ê¸´ê¸‰ ë¡¤ë°± (1ë¶„ ì´ë‚´)

echo "ğŸš¨ ê¸´ê¸‰ ë¡¤ë°± ì‹œì‘"

# 1ï¸âƒ£ íŠ¸ë˜í”½ Blueë¡œ ì „í™˜ (í¬íŠ¸ 2542)
echo "ğŸ”€ íŠ¸ë˜í”½ ì „í™˜: Green â†’ Blue"
# ë°©í™”ë²½/ë¡œë“œë°¸ëŸ°ì„œ ì„¤ì • ë³µì›

# 2ï¸âƒ£ Green ë²„ì „ ì¢…ë£Œ
cd /opt/blacklist-offline-v1.1.0/
docker-compose down

# 3ï¸âƒ£ Blue ë²„ì „ ì¬ì‹œì‘ (ì´ë¯¸ ì‹¤í–‰ ì¤‘ì´ë©´ skip)
cd /opt/blacklist-offline-v1.0.0/
docker-compose ps | grep -q "Up" || docker-compose up -d

# 4ï¸âƒ£ ê²€ì¦
echo "âœ… ë¡¤ë°± ê²€ì¦"
curl http://localhost:2542/health | jq

# 5ï¸âƒ£ ë¬¸ì œ ì›ì¸ ë¶„ì„
cd /opt/blacklist-offline-v1.1.0/
docker-compose logs blacklist-app > /tmp/upgrade_failure_$(date +%Y%m%d_%H%M%S).log
echo "ğŸ“‹ ë¡œê·¸ ì €ì¥: /tmp/upgrade_failure_*.log"
{{/code}}

---

== 2ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ==

=== ğŸ“ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì ìš© ===

{{success}}
**âœ… ì•ˆì „í•œ ë§ˆì´ê·¸ë ˆì´ì…˜**: ë°±ì—… í…Œì´ë¸” ìƒì„± + íŠ¸ëœì­ì…˜ ì‚¬ìš©
{{/success}}

{{code language="sql"}}
-- ğŸ“„ /opt/migrations/v1.1.0_add_severity_column.sql

BEGIN;  -- âœ… íŠ¸ëœì­ì…˜ ì‹œì‘

-- 1ï¸âƒ£ ë°±ì—… í…Œì´ë¸” ìƒì„± (ë¡¤ë°±ìš©)
DROP TABLE IF EXISTS blacklist_ips_backup_20251014;
CREATE TABLE blacklist_ips_backup_20251014 AS
SELECT * FROM blacklist_ips;

-- 2ï¸âƒ£ ìƒˆ ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE blacklist_ips
ADD COLUMN severity VARCHAR(10) DEFAULT 'medium';

UPDATE blacklist_ips
SET severity = CASE
    WHEN country IN ('CN', 'RU', 'KP') THEN 'high'
    WHEN country IN ('US', 'KR', 'JP') THEN 'low'
    ELSE 'medium'
END;

-- 3ï¸âƒ£ ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX idx_blacklist_severity ON blacklist_ips(severity);
CREATE INDEX idx_blacklist_country_severity ON blacklist_ips(country, severity);

-- 4ï¸âƒ£ ê²€ì¦
DO $$
DECLARE
    null_count INT;
BEGIN
    SELECT COUNT(*) INTO null_count
    FROM blacklist_ips
    WHERE severity IS NULL;

    IF null_count > 0 THEN
        RAISE EXCEPTION 'severity ì»¬ëŸ¼ì— NULL ê°’ ë°œê²¬: % ê±´', null_count;
    END IF;
END $$;

COMMIT;  -- âœ… ì»¤ë°‹

-- í™•ì¸
SELECT
    severity,
    COUNT(*) as count,
    ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER (), 2) as percentage
FROM blacklist_ips
GROUP BY severity
ORDER BY count DESC;
{{/code}}

**ğŸ”§ ì ìš© ë°©ë²•:**

{{code language="bash"}}
# 1ï¸âƒ£ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ë³µì‚¬
docker cp /opt/migrations/v1.1.0_add_severity_column.sql \
  blacklist-postgres:/tmp/

# 2ï¸âƒ£ ì‹¤í–‰
echo "ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì¤‘..."
docker exec -it blacklist-postgres \
  psql -U postgres -d blacklist -f /tmp/v1.1.0_add_severity_column.sql

# 3ï¸âƒ£ ê²°ê³¼ í™•ì¸
docker exec -it blacklist-postgres \
  psql -U postgres -d blacklist -c "\d blacklist_ips"

# 4ï¸âƒ£ ë°ì´í„° ê²€ì¦
docker exec -it blacklist-postgres \
  psql -U postgres -d blacklist -c "SELECT severity, COUNT(*) FROM blacklist_ips GROUP BY severity;"
{{/code}}

=== âœ… ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦ ===

{{code language="sql"}}
-- ğŸ“Š ë¬´ê²°ì„± ê²€ì‚¬ ìŠ¤í¬ë¦½íŠ¸

-- 1ï¸âƒ£ ì¤‘ë³µ IP ì²´í¬
SELECT ip_address, source, COUNT(*)
FROM blacklist_ips
GROUP BY ip_address, source
HAVING COUNT(*) > 1;
-- ì˜ˆìƒ ê²°ê³¼: 0 rows

-- 2ï¸âƒ£ NULL ê°’ ì²´í¬ (í•„ìˆ˜ ì»¬ëŸ¼)
SELECT
    COUNT(*) FILTER (WHERE ip_address IS NULL) as null_ip,
    COUNT(*) FILTER (WHERE reason IS NULL) as null_reason,
    COUNT(*) FILTER (WHERE detection_date IS NULL) as null_date
FROM blacklist_ips;
-- ì˜ˆìƒ ê²°ê³¼: 0, 0, 0

-- 3ï¸âƒ£ ì™¸ë˜í‚¤ ë¬´ê²°ì„± (audit_log)
SELECT COUNT(*) as orphaned_logs
FROM audit_log a
LEFT JOIN blacklist_ips b ON a.ip_address = b.ip_address
WHERE a.action LIKE 'blacklist%' AND b.ip_address IS NULL;
-- ì˜ˆìƒ ê²°ê³¼: 0

-- 4ï¸âƒ£ ë‚ ì§œ ë…¼ë¦¬ ê²€ì¦
SELECT COUNT(*) as invalid_dates
FROM blacklist_ips
WHERE removal_date < detection_date;
-- ì˜ˆìƒ ê²°ê³¼: 0

-- 5ï¸âƒ£ í™œì„± IP í†µê³„
SELECT
    is_active,
    COUNT(*) as count,
    ROUND(AVG(EXTRACT(EPOCH FROM (CURRENT_DATE - detection_date))/86400), 1) as avg_age_days
FROM blacklist_ips
GROUP BY is_active;
{{/code}}

---

== 3ï¸âƒ£ ë²„ì „ë³„ ë³€ê²½ì‚¬í•­ ==

=== v3.3.6 â†’ v3.3.7 ì—…ê·¸ë ˆì´ë“œ (ìµœì‹ ) ===

{{success}}
**ğŸ¯ ì£¼ìš” ë³€ê²½ì‚¬í•­**: nginx ì œê±°, Traefik ë¶„ë¦¬, 5ê°œ ì„œë¹„ìŠ¤ë¡œ ìµœì í™”
{{/success}}

(% class="wikitable" %)
|=(% style="background:#2196F3; color:white;" %)ë³€ê²½ í•­ëª©|=(% style="background:#2196F3; color:white;" %)ì„¸ë¶€ì‚¬í•­|=(% style="background:#2196F3; color:white;" %)ì˜í–¥|=(% style="background:#2196F3; color:white;" %)ì¡°ì¹˜ í•„ìš”
|**ğŸ”§ ì•„í‚¤í…ì²˜ ë³€ê²½**|nginx ì œê±°, Traefikìœ¼ë¡œ ì „í™˜|âš ï¸ **ì¤‘ìš”**|Traefik ë³„ë„ ì„¤ì¹˜ í•„ìˆ˜
|**ğŸ“¦ íŒ¨í‚¤ì§€ ìµœì í™”**|860MB â†’ 813MB (47MB ê°ì†Œ)|âœ… ì„±ëŠ¥ í–¥ìƒ|ì—†ìŒ
|**ğŸ³ ì„œë¹„ìŠ¤ ìˆ˜ ë³€ê²½**|6ê°œ â†’ 5ê°œ ì»¨í…Œì´ë„ˆ|âœ… êµ¬ì¡° ë‹¨ìˆœí™”|ì—†ìŒ
|**ğŸŒ ë„ë©”ì¸ ë³€ê²½**|blacklist.jclee.me â†’ blacklist.nxtd.co.kr|âš ï¸ ì„¤ì • ë³€ê²½|Traefik ë¼ìš°íŒ… ì„¤ì •
|**ğŸ”Œ ë„¤íŠ¸ì›Œí¬ ì¶”ê°€**|traefik-public ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬|âš ï¸ ì„¤ì • ë³€ê²½|ë„¤íŠ¸ì›Œí¬ ìƒì„± í•„ìš”
|**ğŸ“Š ìƒˆ ì›¹ í˜ì´ì§€** (v3.3.6)|/integrations, /sessions, /collection-logs|âœ… ê¸°ëŠ¥ ì¶”ê°€|ì—†ìŒ
|**ğŸ”’ FortiGate API** (v3.3.6)|/api/fortinet/active-sessions ì¶”ê°€|âœ… ê¸°ëŠ¥ ì¶”ê°€|ì—†ìŒ

{{panel title="**ğŸ“‹ v3.3.7 ì—…ê·¸ë ˆì´ë“œ ì²´í¬ë¦¬ìŠ¤íŠ¸**"}}
**ë°°í¬ ì „ (Pre-Deployment):**
- [ ] âœ… **Traefik ì„¤ì¹˜ í™•ì¸** ({{code}}docs/TRAEFIK-SETUP.md{{/code}} ì°¸ê³ )
- [ ] âœ… {{code}}traefik-public{{/code}} ë„¤íŠ¸ì›Œí¬ ìƒì„± ({{code}}docker network create traefik-public{{/code}})
- [ ] âœ… SSL ì¸ì¦ì„œ ì¤€ë¹„ ({{code}}/home/jclee/infrastructure/traefik/ssl/{{/code}})
- [ ] âœ… ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì™„ë£Œ
- [ ] âœ… ë””ìŠ¤í¬ ì—¬ìœ  ê³µê°„ í™•ì¸ (ìµœì†Œ 2GB)

**ë°°í¬ ìˆœì„œ:**
- [ ] 1ï¸âƒ£ **Traefik ë¨¼ì € ì‹œì‘** ({{code}}cd /home/jclee/infrastructure/traefik && docker compose up -d{{/code}})
- [ ] 2ï¸âƒ£ traefik-public ë„¤íŠ¸ì›Œí¬ í™•ì¸ ({{code}}docker network ls | grep traefik-public{{/code}})
- [ ] 3ï¸âƒ£ êµ¬ ë²„ì „ ì¤‘ì§€ ({{code}}docker compose down{{/code}})
- [ ] 4ï¸âƒ£ v3.3.7 íŒ¨í‚¤ì§€ ì••ì¶• í•´ì œ
- [ ] 5ï¸âƒ£ ìƒˆ ë²„ì „ ì‹œì‘ ({{code}}bash install.sh{{/code}})
- [ ] 6ï¸âƒ£ í—¬ìŠ¤ì²´í¬ ({{code}}curl -k https://blacklist.nxtd.co.kr/health{{/code}})

**ë°°í¬ í›„ (Post-Deployment):**
- [ ] âœ… Traefik ë¡œê·¸ í™•ì¸ ({{code}}docker logs traefik | grep blacklist{{/code}})
- [ ] âœ… Frontend ë„¤íŠ¸ì›Œí¬ í™•ì¸ ({{code}}docker inspect blacklist-frontend | grep Networks -A 5{{/code}})
- [ ] âœ… ë„ë©”ì¸ ì ‘ê·¼ í™•ì¸ ({{code}}https://blacklist.nxtd.co.kr{{/code}})
- [ ] âœ… ìƒˆ ì›¹ í˜ì´ì§€ ì ‘ê·¼ í™•ì¸
  - {{code}}https://blacklist.nxtd.co.kr/integrations{{/code}}
  - {{code}}https://blacklist.nxtd.co.kr/sessions{{/code}}
  - {{code}}https://blacklist.nxtd.co.kr/collection-logs{{/code}}
- [ ] âœ… FortiGate API í…ŒìŠ¤íŠ¸ ({{code}}/api/fortinet/active-sessions{{/code}})
{{/panel}}

{{warning}}
**âš ï¸ ì¤‘ìš” ì£¼ì˜ì‚¬í•­**
* **Traefikì€ íŒ¨í‚¤ì§€ì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤** - ë³„ë„ ì„¤ì¹˜ í•„ìˆ˜
* **nginx ì»¨í…Œì´ë„ˆ ì œê±°** - ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ
* **í¬íŠ¸ ë…¸ì¶œ ë³€ê²½** - ì´ì œ Traefikì„ í†µí•´ì„œë§Œ ì™¸ë¶€ ì ‘ê·¼
* **ë„¤íŠ¸ì›Œí¬ êµ¬ì„± ë³€ê²½** - Frontendë§Œ traefik-public ì—°ê²°
{{/warning}}

**ğŸ”§ Traefik ì„¤ì¹˜ (ì‹ ê·œ ì„¤ì¹˜ ì‹œ):**

{{code language="bash"}}
# 1ï¸âƒ£ Traefik ë””ë ‰í„°ë¦¬ ìƒì„±
mkdir -p /home/jclee/infrastructure/traefik/{config,ssl}

# 2ï¸âƒ£ SSL ì¸ì¦ì„œ ë³µì‚¬
cp /path/to/cert.crt /home/jclee/infrastructure/traefik/ssl/default.crt
cp /path/to/key.key /home/jclee/infrastructure/traefik/ssl/default.key
chmod 600 /home/jclee/infrastructure/traefik/ssl/*.key

# 3ï¸âƒ£ docker-compose.yml ë° config íŒŒì¼ ì¤€ë¹„
# (docs/TRAEFIK-SETUP.md ì°¸ê³ )

# 4ï¸âƒ£ Traefik ì‹œì‘
cd /home/jclee/infrastructure/traefik
docker compose up -d

# 5ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ìƒì„±
docker network create traefik-public

# 6ï¸âƒ£ Traefik ë™ì‘ í™•ì¸
docker logs traefik
curl -k https://traefik.nxtd.co.kr  # ëŒ€ì‹œë³´ë“œ (ì„¤ì •ëœ ê²½ìš°)
{{/code}}

**ğŸ”„ ë¡¤ë°± (v3.3.6ìœ¼ë¡œ ë³µì›):**

{{code language="bash"}}
# ê¸´ê¸‰ ë¡¤ë°± ì ˆì°¨
# 1ï¸âƒ£ v3.3.7 ì¤‘ì§€
docker compose down

# 2ï¸âƒ£ v3.3.6 íŒ¨í‚¤ì§€ë¡œ ë³µì›
cd /opt/blacklist-v3.3.6/
docker compose up -d

# 3ï¸âƒ£ nginx ì¬ì‹œì‘ (v3.3.6ì€ nginx ì‚¬ìš©)
docker compose restart blacklist-nginx

# 4ï¸âƒ£ ê²€ì¦
curl http://localhost/health
{{/code}}

---

=== v1.0 â†’ v1.1 ì—…ê·¸ë ˆì´ë“œ (ë ˆê±°ì‹œ) ===

(% class="wikitable" %)
|=(% style="background:#607D8B; color:white;" %)ë³€ê²½ í•­ëª©|=(% style="background:#607D8B; color:white;" %)ì˜í–¥|=(% style="background:#607D8B; color:white;" %)í˜¸í™˜ì„±|=(% style="background:#607D8B; color:white;" %)ì¡°ì¹˜ í•„ìš”
|**í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ìš°ì„  ì²´í¬**|ë¸”ë™ë¦¬ìŠ¤íŠ¸ ë¡œì§ ë³€ê²½|âœ… í•˜ìœ„ í˜¸í™˜|ì—†ìŒ
|**Redis ìºì‹± ì¶”ê°€**|ì„±ëŠ¥ í–¥ìƒ (85% íˆíŠ¸ìœ¨)|âœ… í•˜ìœ„ í˜¸í™˜|REDIS_PASSWORD ì„¤ì •
|**REGTECH ìˆ˜ì§‘ ìë™í™”**|ìˆ˜ë™ â†’ ìë™ ìˆ˜ì§‘|âš ï¸ ì„¤ì • í•„ìš”|REGTECH_ID, REGTECH_PW
|**severity ì»¬ëŸ¼ ì¶”ê°€**|DB ìŠ¤í‚¤ë§ˆ ë³€ê²½|âš ï¸ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”|SQL ì‹¤í–‰
|**Prometheus ë©”íŠ¸ë¦­**|ëª¨ë‹ˆí„°ë§ ê°•í™”|âœ… í•˜ìœ„ í˜¸í™˜|ì—†ìŒ

{{panel title="**ğŸ“‹ ì—…ê·¸ë ˆì´ë“œ ì²´í¬ë¦¬ìŠ¤íŠ¸**"}}
**ë°°í¬ ì „ (Pre-Deployment):**
- [ ] âœ… ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì™„ë£Œ ({{code}}pg_dump{{/code}})
- [ ] âœ… í˜„ì¬ ë²„ì „ íƒœê·¸ ê¸°ë¡
- [ ] âœ… ë””ìŠ¤í¬ ì—¬ìœ  ê³µê°„ í™•ì¸ (ìµœì†Œ 10GB)
- [ ] âœ… .env íŒŒì¼ì— {{code}}REDIS_PASSWORD{{/code}} ì¶”ê°€
- [ ] âœ… .env íŒŒì¼ì— {{code}}REGTECH_ID{{/code}}, {{code}}REGTECH_PW{{/code}} ì„¤ì •

**ë°°í¬ ì¤‘ (Deployment):**
- [ ] âœ… ë¸”ë£¨-ê·¸ë¦° ë°°í¬ë¡œ ìƒˆ ë²„ì „ ì‹œì‘ (ë‹¤ë¥¸ í¬íŠ¸)
- [ ] âœ… DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ë° ê²€ì¦
- [ ] âœ… í—¬ìŠ¤ì²´í¬ í†µê³¼ í™•ì¸ ({{code}}/health{{/code}})
- [ ] âœ… ìƒ˜í”Œ IP í…ŒìŠ¤íŠ¸ (í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ìš°ì„  í™•ì¸)
- [ ] âœ… í†µê³„ API ì‘ë‹µ í™•ì¸ ({{code}}/api/stats{{/code}})

**ë°°í¬ í›„ (Post-Deployment):**
- [ ] âœ… íŠ¸ë˜í”½ ì „í™˜ ì™„ë£Œ
- [ ] âœ… 30ë¶„ê°„ ëª¨ë‹ˆí„°ë§ (ì—ëŸ¬ìœ¨, ì‘ë‹µ ì‹œê°„)
- [ ] âœ… êµ¬ ë²„ì „ ì¢…ë£Œ
- [ ] âœ… 24ì‹œê°„ ëª¨ë‹ˆí„°ë§ ê³„íš ìˆ˜ë¦½
{{/panel}}

---


//ì‘ì„±: ì •ë³´ë³´ì•ˆíŒ€//

----

== ğŸ’¬ Discussion ==

{{info}}
ì´ ë¬¸ì„œì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ í”¼ë“œë°±ì´ ìˆìœ¼ì‹œë©´ ì•„ë˜ì— ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”.
{{/info}}

{{comment}}
ëŒ“ê¸€ì„ ì¶”ê°€í•˜ì„¸ìš”...
{{/comment}}
