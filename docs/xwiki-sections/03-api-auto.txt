= ğŸ“¡ 3. API Documentation (Auto-generated) =

{{info}}
ì´ ë¬¸ì„œëŠ” ì†ŒìŠ¤ ì½”ë“œì—ì„œ **ìë™ìœ¼ë¡œ ìƒì„±**ë˜ì—ˆìŠµë‹ˆë‹¤.
ë§ˆì§€ë§‰ ìƒì„±: $datetool.get('yyyy-MM-dd HH:mm:ss')
{{/info}}

{{warning}}
**ì¤‘ìš”**: ì´ ë¬¸ì„œëŠ” ìë™ ìƒì„±ë˜ë¯€ë¡œ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ë§ˆì„¸ìš”.
ë³€ê²½ì´ í•„ìš”í•˜ë©´ ì†ŒìŠ¤ ì½”ë“œì˜ Docstringì„ ìˆ˜ì •í•œ í›„ ì¬ìƒì„±í•˜ì„¸ìš”.
{{/warning}}

----

== API Base URL ==

{{code language="bash"}}
BASE_URL=http://blacklist.jclee.me:2542
{{/code}}

----

== Blacklist Management ==

=== /blacklist/list ===

**Methods**: GET

**Function**: {{code}}get_blacklist_list(){{/code}}

**Description**: ë¸”ë™ë¦¬ìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ API

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/blacklist/list" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "items": [...],
  "total": 100,
  "page": 1,
  "per_page": 50
}
{{/code}}

----

=== /blacklist/stats ===

**Methods**: GET

**Function**: {{code}}get_blacklist_stats(){{/code}}

**Description**: ë¸”ë™ë¦¬ìŠ¤íŠ¸ í†µê³„ API

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/blacklist/stats" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "items": [...],
  "total": 100,
  "page": 1,
  "per_page": 50
}
{{/code}}

----

=== /blacklist/check ===

**Methods**: POST, GET

**Function**: {{code}}get_blacklist_json(){{/code}}

**Description**: ë¸”ë™ë¦¬ìŠ¤íŠ¸ ë°ì´í„° JSON ì¡°íšŒ - JavaScriptì—ì„œ í˜¸ì¶œ

**Example Request**:

{{code language="bash"}}
curl -X POST \
  "/blacklist/check" \
  -H 'Content-Type: application/json' \
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "blocked": false,
  "reason": "not_in_blacklist",
  "ip": "1.2.3.4",
  "metadata": {}
}
{{/code}}

----

=== /blacklist/manual-add ===

**Methods**: POST

**Function**: {{code}}manual_add_ip(){{/code}}

**Description**: ìˆ˜ë™ IP ë“±ë¡ API (ë¸”ë™ë¦¬ìŠ¤íŠ¸)

**Example Request**:

{{code language="bash"}}
curl -X POST \
  "/blacklist/manual-add" \
  -H 'Content-Type: application/json' \
  -d '{
    "ip_address": "1.2.3.4",
    "country": "KR",
    "reason": "Reason for entry"
  }'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "items": [...],
  "total": 100,
  "page": 1,
  "per_page": 50
}
{{/code}}

----

=== /blacklist/active ===

**Methods**: GET

**Function**: {{code}}get_active_blacklist(){{/code}}

**Description**: í™œì„± ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ (í…ìŠ¤íŠ¸)

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/blacklist/active" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "items": [...],
  "total": 100,
  "page": 1,
  "per_page": 50
}
{{/code}}

----

=== /blacklist/json ===

**Methods**: GET

**Function**: {{code}}get_blacklist_json(){{/code}}

**Description**: í™œì„± ë¸”ë™ë¦¬ìŠ¤íŠ¸ JSON í˜•ì‹

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/blacklist/json" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "items": [...],
  "total": 100,
  "page": 1,
  "per_page": 50
}
{{/code}}

----

=== /blacklist ===

**Methods**: GET

**Function**: {{code}}get_active_blacklist(){{/code}}

**Description**: FortiNetìš© í™œì„± ë¸”ë™ë¦¬ìŠ¤íŠ¸ IP ì œê³µ
    ë§Œë£Œì¼ ì²´í¬ ë° í™œì„± ìƒíƒœ í•„í„°ë§

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/blacklist" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "items": [...],
  "total": 100,
  "page": 1,
  "per_page": 50
}
{{/code}}

----

== Whitelist Management ==

=== /whitelist/manual-add ===

**Methods**: POST

**Function**: {{code}}manual_add_whitelist_ip(){{/code}}

**Description**: ìˆ˜ë™ IP ë“±ë¡ API (í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸)

**Example Request**:

{{code language="bash"}}
curl -X POST \
  "/whitelist/manual-add" \
  -H 'Content-Type: application/json' \
  -d '{
    "ip_address": "1.2.3.4",
    "country": "KR",
    "reason": "Reason for entry"
  }'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "items": [...],
  "total": 100,
  "page": 1,
  "per_page": 50
}
{{/code}}

----

=== /whitelist/list ===

**Methods**: GET

**Function**: {{code}}get_whitelist_list(){{/code}}

**Description**: í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ API

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/whitelist/list" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "items": [...],
  "total": 100,
  "page": 1,
  "per_page": 50
}
{{/code}}

----

== Collection Management ==

=== /collection/history ===

**Methods**: GET

**Function**: {{code}}get_collection_history(){{/code}}

**Description**: ìˆ˜ì§‘ íˆìŠ¤í† ë¦¬ ì¡°íšŒ

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/collection/history" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "success": true,
  "data": {...}
}
{{/code}}

----

=== /collection/regtech/trigger ===

**Methods**: POST

**Function**: {{code}}trigger_regtech_collection(){{/code}}

**Description**: REGTECH ìˆ˜ì§‘ íŠ¸ë¦¬ê±° - ë‚ ì§œ ë²”ìœ„ ì§€ì›

**Example Request**:

{{code language="bash"}}
curl -X POST \
  "/collection/regtech/trigger" \
  -H 'Content-Type: application/json' \
  # No request body required
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "status": "started",
  "message": "Collection started in background"
}
{{/code}}

----

=== /collection/status ===

**Methods**: GET

**Function**: {{code}}get_collection_status(){{/code}}

**Description**: ìˆ˜ì§‘ ìƒíƒœ ì¡°íšŒ API - UIì—ì„œ ìš”ì²­í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/collection/status" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "success": true,
  "data": {...}
}
{{/code}}

----

=== /admin/collection/start ===

**Methods**: POST

**Function**: {{code}}start_collection(){{/code}}

**Description**: ì‹¤ì œ ìˆ˜ì§‘ ì‹œì‘

**Example Request**:

{{code language="bash"}}
curl -X POST \
  "/admin/collection/start" \
  -H 'Content-Type: application/json' \
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "success": true,
  "data": {...}
}
{{/code}}

----

== Statistics & Monitoring ==

=== /stats ===

**Methods**: GET

**Function**: {{code}}get_statistics(){{/code}}

**Description**: ì‹œìŠ¤í…œ í†µê³„

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/stats" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "success": true,
  "data": {...}
}
{{/code}}

----

=== /api/real-stats ===

**Methods**: GET

**Function**: {{code}}get_real_stats(){{/code}}

**Description**: ì‹¤ì‹œê°„ í†µê³„ ë°ì´í„°

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/api/real-stats" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "success": true,
  "data": {...}
}
{{/code}}

----

== Health & Metrics ==

=== /health ===

**Methods**: GET

**Function**: {{code}}fortinet_health(){{/code}}

**Description**: FortiNet API í—¬ìŠ¤ì²´í¬

**Example Request**:

{{code language="bash"}}
curl -X GET \
  "/health" \
  -H 'Accept: application/json'
{{/code}}

**Example Response**:

{{code language="json"}}
{
  "status": "healthy",
  "timestamp": "2025-10-15T12:00:00Z",
  "version": "3.3.0"
}
{{/code}}

----


== API Usage Tips ==

{{panel}}
=== Authentication ===

í˜„ì¬ ë²„ì „ì€ ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í–¥í›„ JWT í† í° ê¸°ë°˜ ì¸ì¦ì´ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.

=== Rate Limiting ===

* **ì¼ë°˜ ìš”ì²­**: ë¶„ë‹¹ 60íšŒ
* **Collection API**: ì‹œê°„ë‹¹ 10íšŒ
* **Rate Limit ì´ˆê³¼ ì‹œ**: HTTP 429 ì‘ë‹µ

=== Error Handling ===

|= HTTP Code |= Meaning |= Action
| 200 | Success | ì •ìƒ ì²˜ë¦¬
| 400 | Bad Request | ìš”ì²­ íŒŒë¼ë¯¸í„° í™•ì¸
| 404 | Not Found | IP ì£¼ì†Œ ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ì—†ìŒ
| 429 | Rate Limit | ì ì‹œ í›„ ì¬ì‹œë„
| 500 | Server Error | ê´€ë¦¬ì ë¬¸ì˜
{{/panel}}

----

== Response Format ==

ëª¨ë“  API ì‘ë‹µì€ JSON í˜•ì‹ì…ë‹ˆë‹¤:

{{code language="json"}}
{
  "success": true,
  "data": {...},
  "error": null,
  "timestamp": "2025-10-15T12:00:00Z"
}
{{/code}}

**ì—ëŸ¬ ë°œìƒ ì‹œ**:

{{code language="json"}}
{
  "success": false,
  "data": null,
  "error": {
    "code": "INVALID_IP",
    "message": "Invalid IP address format"
  },
  "timestamp": "2025-10-15T12:00:00Z"
}
{{/code}}

----

== SDK & Client Libraries ==

{{info}}
**Python Client** (ì¤€ë¹„ ì¤‘):
{{code language="python"}}
from blacklist_client import BlacklistAPI

client = BlacklistAPI("http://blacklist.jclee.me:2542")
result = client.check_ip("1.2.3.4")
print(result.blocked, result.reason)
{{/code}}
{{/info}}

{{info}}
**JavaScript Client** (ì¤€ë¹„ ì¤‘):
{{code language="javascript"}}
import { BlacklistAPI } from '@blacklist/client';

const client = new BlacklistAPI('http://blacklist.jclee.me:2542');
const result = await client.checkIP('1.2.3.4');
console.log(result.blocked, result.reason);
{{/code}}
{{/info}}

----

== API Changelog ==

|= Version |= Date |= Changes
| 3.3.0 | 2025-10-14 | í™˜ê²½ë³€ìˆ˜ ì œê±°, UI ê¸°ë°˜ ì„¤ì • ê´€ë¦¬
| 3.2.0 | 2025-10-10 | Collection API ì¶”ê°€
| 3.1.0 | 2025-10-05 | Whitelist ìš°ì„ ìˆœìœ„ ë¡œì§ êµ¬í˜„
| 3.0.0 | 2025-10-01 | ì´ˆê¸° API ë¦´ë¦¬ìŠ¤

----

{{success}}
**API Documentation v3.0**
ìë™ ìƒì„± ì‹œìŠ¤í…œìœ¼ë¡œ í•­ìƒ ìµœì‹  ìƒíƒœ ìœ ì§€
{{/success}}

----

== ğŸ’¬ Discussion ==

{{info}}
ì´ ë¬¸ì„œì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ í”¼ë“œë°±ì´ ìˆìœ¼ì‹œë©´ ì•„ë˜ì— ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”.
{{/info}}

{{comment}}
ëŒ“ê¸€ì„ ì¶”ê°€í•˜ì„¸ìš”...
{{/comment}}
