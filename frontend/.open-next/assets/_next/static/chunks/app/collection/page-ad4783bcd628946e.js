(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{209:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(5155);function l(e){let{title:s,description:t,icon:l,actions:r}=e;return(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[l&&(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl text-white shadow-lg",children:(0,a.jsx)(l,{className:"h-8 w-8"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:s}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:t})]})]}),r&&(0,a.jsx)("div",{className:"flex items-center space-x-3",children:r})]})})}},2416:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>U});var a=t(5155),l=t(2115),r=t(5870),n=t(3),c=t(5370),i=t(4485),d=t(5710),o=t(2529),x=t(9708),m=t(8874),u=t(6132),h=t(9559),p=t(6983),g=t(1524),b=t(5921),j=t(7621);let y=["REGTECH"];function N(){var e;let[s,t]=(0,l.useState)([]),[n,c]=(0,l.useState)(null),[i,N]=(0,l.useState)(null),[f,v]=(0,l.useState)(!0),[w,k]=(0,l.useState)({}),[_,A]=(0,l.useState)({}),[C,S]=(0,l.useState)(!1),[E,R]=(0,l.useState)(null),[L,T]=(0,l.useState)(null),[O,F]=(0,l.useState)({username:"",password:"",enabled:!0,collection_interval:"daily"});(0,l.useEffect)(()=>{G();let e=setInterval(G,3e4);return()=>clearInterval(e)},[]);let G=async()=>{v(!0);try{let e=y.map(async e=>{try{let s=await (0,j.w_)(e.toLowerCase());if(s&&s.success&&s.data)return{service_name:s.data.service_name,username:s.data.username,enabled:s.data.enabled,collection_interval:s.data.collection_interval,last_collection:s.data.last_collection,connection_status:"unknown"}}catch(s){console.error("Failed to fetch ".concat(e," credentials:"),s)}return null}),s=(await Promise.all(e)).filter(e=>null!==e);t(s);let a=await (0,j.jN)();a&&a.success&&a.data&&c(a.data);let l=await (0,j.Rq)();l&&l.success&&l.data&&N(l.data)}catch(e){console.error("Failed to fetch data:",e)}finally{v(!1)}},M=async e=>{k(s=>({...s,[e]:!0}));try{let s=await (0,j.SI)(e.toLowerCase());t(t=>t.map(t=>t.service_name===e?{...t,connection_status:s.success?"connected":"failed",status_message:s.message||s.error}:t)),s.success?T({type:"success",message:"".concat(e," 연결 테스트 성공!")}):T({type:"error",message:"".concat(e," 연결 실패: ").concat(s.message||s.error)})}catch(s){T({type:"error",message:"".concat(e," 연결 테스트 중 오류 발생")})}finally{k(s=>({...s,[e]:!1}))}},H=async e=>{A(s=>({...s,[e]:!0}));try{let s=await (0,j.mT)(e.toLowerCase(),{force:!0});s.success?(T({type:"success",message:"".concat(e," 수집 작업이 시작되었습니다!")}),setTimeout(G,2e3)):T({type:"error",message:"".concat(e," 수집 실패: ").concat(s.error||"알 수 없는 오류")})}catch(s){T({type:"error",message:"".concat(e," 수집 작업 중 오류 발생")})}finally{A(s=>({...s,[e]:!1}))}},P=async()=>{if(E)try{let e=await (0,j.nZ)(E.toLowerCase(),O);e.success?(T({type:"success",message:"".concat(E," 인증 정보가 저장되었습니다!")}),S(!1),R(null),F({username:"",password:"",enabled:!0,collection_interval:"daily"}),G()):T({type:"error",message:"저장 실패: ".concat(e.error||"알 수 없는 오류")})}catch(e){T({type:"error",message:"저장 중 오류 발생"})}};return f?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"데이터 로딩 중..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[L&&(0,a.jsx)("div",{role:"alert","aria-live":"polite",className:"rounded-md p-4 ".concat("success"===L.type?"bg-green-50":"bg-red-50"),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm font-medium ".concat("success"===L.type?"text-green-800":"text-red-800"),children:L.message}),(0,a.jsx)("button",{type:"button",onClick:()=>T(null),className:"ml-4 text-sm font-medium ".concat("success"===L.type?"text-green-600 hover:text-green-500":"text-red-600 hover:text-red-500"),children:"닫기"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"수집 상태"}),(()=>{let e=Object.values(_).some(e=>e);return(0,a.jsx)("p",{className:"text-2xl font-bold mt-2 ".concat(e?"text-green-600":"text-gray-900"),children:e?"수집 중":"대기 중"})})()]}),Object.values(_).some(e=>e)?(0,a.jsx)(h.A,{className:"h-12 w-12 text-green-500 animate-spin"}):(0,a.jsx)(h.A,{className:"h-12 w-12 text-gray-400"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"현재 등록 IP"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:(null==i||null==(e=i.total_ips)?void 0:e.toLocaleString())||0})]}),(0,a.jsx)(d.A,{className:"h-12 w-12 text-blue-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"활성 수집기"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:(null==n?void 0:n.collectors)?Object.values(n.collectors).filter(e=>e.enabled).length:0}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["전체: ",(null==n?void 0:n.collectors)?Object.keys(n.collectors).length:0,"개"]})]}),(0,a.jsx)(r.A,{className:"h-12 w-12 text-blue-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"마지막 업데이트"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-2",children:(null==i?void 0:i.last_update)?new Date(i.last_update).toLocaleString("ko-KR"):"없음"})]}),(0,a.jsx)(p.A,{className:"h-12 w-12 text-blue-500"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-gray-700 mr-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"수집기 현황"})]}),(0,a.jsxs)("button",{onClick:G,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition flex items-center",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"새로고침"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(null==n?void 0:n.collectors)&&Object.entries(n.collectors).map(e=>{var t;let[l,n]=e,c=s.find(e=>e.service_name===l),d=(e=>{if(!(null==i?void 0:i.sources))return 0;let s=i.sources.find(s=>s.source===e);return(null==s?void 0:s.count)||0})(l);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 ".concat("REGTECH"===l?"bg-gradient-to-r from-pink-500 to-pink-600":"SECUDIUM"===l?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-gray-500 to-gray-600"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-xl font-bold text-white",children:l}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat(n.enabled?"bg-white/20 text-white":"bg-red-500 text-white"),children:n.enabled?"활성":"비활성"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:n.run_count}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"수집 횟수"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:n.error_count}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"오류 횟수"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:d.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"누적 수집"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"사용자명:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==c?void 0:c.username)||"-"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"수집 주기:"}),(0,a.jsx)("span",{className:"font-medium",children:(t=n.interval_seconds)>=86400?"".concat(Math.floor(t/86400),"일"):t>=3600?"".concat(Math.floor(t/3600),"시간"):"".concat(Math.floor(t/60),"분")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"마지막 수집:"}),(0,a.jsx)("span",{className:"font-medium",children:n.last_run?new Date(n.last_run).toLocaleString("ko-KR"):"없음"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"다음 수집:"}),(0,a.jsx)("span",{className:"font-medium text-blue-600",children:n.next_run?new Date(n.next_run).toLocaleString("ko-KR"):"대기 중"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"connected":return(0,a.jsx)(o.A,{className:"h-5 w-5 text-green-500"});case"locked":return(0,a.jsx)(x.A,{className:"h-5 w-5 text-red-500"});case"failed":return(0,a.jsx)(m.A,{className:"h-5 w-5 text-red-500"});default:return(0,a.jsx)(u.A,{className:"h-5 w-5 text-gray-400"})}})(null==c?void 0:c.connection_status),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"연결 상태"})]}),(e=>{switch(e){case"connected":return(0,a.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full flex items-center",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 inline mr-1"}),"연결 성공"]});case"locked":return(0,a.jsxs)("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded-full flex items-center",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 inline mr-1"}),"계정 잠김"]});case"failed":return(0,a.jsxs)("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded-full flex items-center",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 inline mr-1"}),"연결 실패"]});default:return(0,a.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 text-xs font-semibold rounded-full flex items-center",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 inline mr-1"}),"미테스트"]})}})(null==c?void 0:c.connection_status)]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>M(l),disabled:w[l]||!n.enabled,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:w[l]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2 animate-spin"}),"테스트 중..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"연결 테스트"]})}),(0,a.jsx)("button",{onClick:()=>H(l),disabled:_[l]||!n.enabled,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:_[l]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2 animate-spin"}),"수집 중..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"즉시 수집"]})}),(0,a.jsxs)("button",{onClick:()=>(e=>{let t=s.find(s=>s.service_name===e);t&&(R(e),F({username:t.username,password:"",enabled:t.enabled,collection_interval:t.collection_interval||"daily"}),S(!0))})(l),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition text-sm flex items-center",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 mr-2"}),"설정"]})]})]})]},l)})})]}),C&&E&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{S(!1),R(null)},onKeyDown:e=>{"Escape"===e.key&&(S(!1),R(null))},role:"presentation",children:(0,a.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"credential-modal-title",className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("h3",{id:"credential-modal-title",className:"text-xl font-bold text-gray-900 mb-4",children:[E," 인증 정보 수정"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"사용자명"}),(0,a.jsx)("input",{type:"text",value:O.username,onChange:e=>F({...O,username:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"사용자명 입력"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호"}),(0,a.jsx)("input",{type:"password",value:O.password,onChange:e=>F({...O,password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"새 비밀번호 입력 (변경 시만)"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"비밀번호를 변경하지 않으려면 비워두세요"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"수집 주기"}),(0,a.jsxs)("select",{value:O.collection_interval,onChange:e=>F({...O,collection_interval:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"hourly",children:"시간별"}),(0,a.jsx)("option",{value:"daily",children:"일일"}),(0,a.jsx)("option",{value:"weekly",children:"주간"})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"enabled",checked:O.enabled,onChange:e=>F({...O,enabled:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"enabled",className:"ml-2 block text-sm text-gray-700",children:"수집 활성화"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:P,disabled:!O.username,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition disabled:opacity-50",children:"저장"}),(0,a.jsx)("button",{onClick:()=>{S(!1),R(null),F({username:"",password:"",enabled:!0,collection_interval:"daily"})},className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition",children:"취소"})]})]})})]})}var f=t(9715),v=t(6485),w=t(6955),k=t(2056),_=t(9324),A=t(368),C=t(7937);function S(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)({}),[n,c]=(0,l.useState)(!0),[i,x]=(0,l.useState)(null),[u,b]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[S,E]=(0,l.useState)(1),[R,L]=(0,l.useState)(0),T=(0,l.useCallback)(async()=>{c(!0),x(null);try{var e;let t=new URLSearchParams;t.append("limit",String(20)),u&&t.append("source",u);let a=await (0,j.DT)(t.toString());if(a&&a.success&&a.data){let e=a.data,t=e.history||[];"success"===y?t=t.filter(e=>e.success):"failed"===y&&(t=t.filter(e=>!e.success)),s(t),L(e.total||0)}else x("수집 이력을 불러오는데 실패했습니다");let l=await (0,j.g5)();l&&l.success&&(null==(e=l.data)?void 0:e.sources)&&r(l.data.sources)}catch(e){console.error("Failed to fetch collection history:",e),x("네트워크 오류가 발생했습니다")}finally{c(!1)}},[u,y]);(0,l.useEffect)(()=>{T()},[T]);let O=Math.ceil(R/20),F=e=>{if(!e)return"-";if(e<60)return"".concat(e.toFixed(1),"초");let s=Math.floor(e/60),t=(e%60).toFixed(0);return"".concat(s,"분 ").concat(t,"초")},G=e=>"REGTECH"===e?"bg-pink-100 text-pink-800 border-pink-200":"bg-gray-100 text-gray-800 border-gray-200",M={totalCollections:Object.values(t).reduce((e,s)=>e+(s.total_collections||0),0),avgSuccessRate:Object.values(t).length>0?Object.values(t).reduce((e,s)=>e+(s.success_rate||0),0)/Object.values(t).length:0,totalItems:Object.values(t).reduce((e,s)=>e+(s.total_items||0),0)};return n?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"데이터 로딩 중..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"총 수집 횟수"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.totalCollections})]}),(0,a.jsx)(d.A,{className:"h-10 w-10 text-blue-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"평균 성공률"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[M.avgSuccessRate.toFixed(1),"%"]})]}),(0,a.jsx)(g.A,{className:"h-10 w-10 text-green-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"누적 수집량"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:M.totalItems.toLocaleString()})]}),(0,a.jsx)(f.A,{className:"h-10 w-10 text-purple-500"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"활성 소스"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:Object.keys(t).length})]}),(0,a.jsx)(v.A,{className:"h-10 w-10 text-orange-500"})]})})]}),Object.keys(t).length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"소스별 통계"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(t).map(e=>{var s;let[t,l]=e;return(0,a.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat("REGTECH"===t?"border-pink-200 bg-pink-50":"border-blue-200 bg-blue-50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat(G(t)),children:t}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(l.success_rate>=90?"text-green-600":l.success_rate>=70?"text-yellow-600":"text-red-600"),children:["성공률 ",(null==(s=l.success_rate)?void 0:s.toFixed(1))||0,"%"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"수집 횟수"}),(0,a.jsxs)("p",{className:"font-semibold",children:[l.total_collections||0,"회"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"누적 수집"}),(0,a.jsxs)("p",{className:"font-semibold",children:[(l.total_items||0).toLocaleString(),"개"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"평균 소요"}),(0,a.jsx)("p",{className:"font-semibold",children:F(l.avg_duration)})]})]}),l.last_collection&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["마지막 수집: ",new Date(l.last_collection).toLocaleString("ko-KR")]})]},t)})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("select",{value:u,onChange:e=>{b(e.target.value),E(1)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,a.jsx)("option",{value:"",children:"모든 소스"}),(0,a.jsx)("option",{value:"REGTECH",children:"REGTECH"})]})]}),(0,a.jsxs)("select",{value:y,onChange:e=>{N(e.target.value),E(1)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,a.jsx)("option",{value:"",children:"모든 상태"}),(0,a.jsx)("option",{value:"success",children:"성공"}),(0,a.jsx)("option",{value:"failed",children:"실패"})]})]}),(0,a.jsxs)("button",{onClick:T,disabled:n,className:"flex items-center px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition disabled:opacity-50",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2 ".concat(n?"animate-spin":"")}),"새로고침"]})]}),i&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 text-red-500 mr-3"}),(0,a.jsx)("span",{className:"text-red-700",children:i})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"서비스"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"수집 개수"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"신규 / 갱신"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"소요 시간"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"수집 시간"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"비고"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition ".concat(e.success?"":"bg-red-50"),children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.success?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-green-600 font-medium",children:"성공"})]}):(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-red-600 font-medium",children:"실패"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold border ".concat(G(e.service_name)),children:e.service_name||"N/A"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:(e.items_collected||0).toLocaleString()}),(0,a.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"개"})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsxs)("span",{className:"text-green-600 font-medium",children:["신규: ",(e.new_count||0).toLocaleString()]}),(0,a.jsx)("span",{className:"text-gray-400",children:"/"}),(0,a.jsxs)("span",{className:"text-orange-600 font-medium",children:["갱신: ",(e.updated_count||0).toLocaleString()]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(_.A,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{children:F(e.duration_seconds)})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:e.collection_date?new Date(e.collection_date).toLocaleString("ko-KR"):"N/A"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:e.error_message?(0,a.jsx)("span",{className:"text-red-600 truncate block",title:e.error_message,children:e.error_message}):(0,a.jsx)("span",{className:"text-gray-400",children:"-"})})]},e.id||s)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"수집 이력이 없습니다"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"데이터 수집이 완료되면 이력이 표시됩니다"})]})})})})]})}),O>1&&(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["총 ",(0,a.jsx)("span",{className:"font-semibold",children:R}),"개 중"," ",(0,a.jsxs)("span",{className:"font-semibold",children:[(S-1)*20+1,"-",Math.min(20*S,R)]}),"개 표시"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>E(e=>Math.max(1,e-1)),disabled:1===S,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(A.A,{className:"h-5 w-5"})}),(0,a.jsxs)("span",{className:"px-4 py-2 text-sm",children:[S," / ",O]}),(0,a.jsx)("button",{onClick:()=>E(e=>Math.min(O,e+1)),disabled:S===O,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(C.A,{className:"h-5 w-5"})})]})]})]})]})}var E=t(532),R=t(7828),L=t(5299),T=t(6046);function O(){let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)(!0),[n,c]=(0,l.useState)(null),[i,d]=(0,l.useState)({}),[m,h]=(0,l.useState)({}),[p,g]=(0,l.useState)({}),[b,y]=(0,l.useState)(null);(0,l.useEffect)(()=>{N()},[]);let N=async()=>{r(!0);try{let e=await (0,j.w_)("regtech");e&&(s(e.data),g(s=>({...s,regtech:e.data})))}catch(e){console.error("Failed to fetch credentials:",e),y({type:"error",text:"인증정보 로드 실패"})}finally{r(!1)}},f=e=>{h({...m,[e]:!0})},v=async e=>{c(e),y(null);try{let s=p[e],t=await (0,j.nZ)(e,s);t&&t.success?(y({type:"success",text:"".concat(e.toUpperCase()," 인증정보 저장 완료")}),h({...m,[e]:!1}),await N()):y({type:"error",text:t.error||"저장 실패"})}catch(e){console.error("Save error:",e),y({type:"error",text:"저장 중 오류 발생"})}finally{c(null)}},w=(e,s,t)=>{g({...p,[e]:{...p[e],[s]:t}})};return t?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(L.A,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"인증정보 로드 중..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[b&&(0,a.jsxs)("div",{className:"p-4 rounded-lg flex items-center space-x-3 ".concat("success"===b.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:["success"===b.type?(0,a.jsx)(o.A,{className:"h-5 w-5 flex-shrink-0"}):(0,a.jsx)(u.A,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsx)("p",{className:"font-medium",children:b.text}),(0,a.jsx)("button",{onClick:()=>y(null),className:"ml-auto text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"보안 안내"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-blue-700",children:"모든 인증정보는 AES-256 암호화되어 데이터베이스에 안전하게 저장됩니다. 비밀번호는 마스킹되어 표시되며, 변경 시에만 입력하시면 됩니다."})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6",children:((s,t,l,r)=>{let c=m[s],o=n===s,b=p[s]||t||{};return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md border-l-4 ".concat(r),children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(r.replace("border-","bg-").replace("500","100")),children:(0,a.jsx)(x.A,{className:"h-6 w-6 ".concat(r.replace("border-","text-"))})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:l}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(null==t?void 0:t.service_name)||s.toUpperCase()})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:t&&(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(b.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:b.enabled?"활성":"비활성"})})]}),t||c?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"사용자명"}),c?(0,a.jsx)("input",{type:"text",value:b.username||"",onChange:e=>w(s,"username",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"사용자명 입력"}):(0,a.jsx)("p",{className:"text-gray-900 font-mono bg-gray-50 px-3 py-2 rounded",children:b.username||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호"}),c?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:i[s]?"text":"password",value:"***masked***"===b.password?"":b.password||"",onChange:e=>w(s,"password",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10",placeholder:"비밀번호 입력 (변경 시에만)"}),(0,a.jsx)("button",{type:"button",onClick:()=>{d({...i,[s]:!i[s]})},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:i[s]?(0,a.jsx)(E.A,{className:"h-5 w-5"}):(0,a.jsx)(R.A,{className:"h-5 w-5"})})]}):(0,a.jsx)("p",{className:"text-gray-900 font-mono bg-gray-50 px-3 py-2 rounded",children:"••••••••••••"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"수집 주기"}),c?(0,a.jsxs)("select",{value:b.collection_interval||"daily",onChange:e=>w(s,"collection_interval",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"hourly",children:"매시간"}),(0,a.jsx)("option",{value:"daily",children:"매일"}),(0,a.jsx)("option",{value:"weekly",children:"매주"})]}):(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 px-3 py-2 rounded",children:"hourly"===b.collection_interval?"매시간":"daily"===b.collection_interval?"매일":"weekly"===b.collection_interval?"매주":"-"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"자동 수집 활성화"}),c?(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:b.enabled||!1,onChange:e=>w(s,"enabled",e.target.checked),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(b.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:b.enabled?"ON":"OFF"})]}),b.last_collection&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium",children:"마지막 수집:"})," ",new Date(b.last_collection).toLocaleString("ko-KR")]}),(0,a.jsx)("div",{className:"flex space-x-3 pt-4 border-t",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>v(s),disabled:o,className:"flex-1 flex items-center justify-center px-4 py-2 ".concat(r.replace("border-","bg-")," text-white rounded-lg hover:opacity-90 transition disabled:opacity-50"),children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.A,{className:"h-5 w-5 mr-2 animate-spin"}),"저장 중..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{className:"h-5 w-5 mr-2"}),"저장"]})}),(0,a.jsx)("button",{onClick:()=>{h({...m,[s]:!1}),"regtech"===s&&e&&g({...p,regtech:e})},disabled:o,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition disabled:opacity-50",children:"취소"})]}):(0,a.jsx)("button",{onClick:()=>f(s),className:"w-full px-4 py-2 ".concat(r.replace("border-","bg-")," text-white rounded-lg hover:opacity-90 transition"),children:"수정"})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"인증정보가 등록되지 않았습니다"}),(0,a.jsx)("button",{onClick:()=>f(s),className:"px-4 py-2 ".concat(r.replace("border-","bg-")," text-white rounded-lg hover:opacity-90 transition"),children:"등록하기"})]})]})})})("regtech",e,"REGTECH 인증정보","border-pink-500")})]})}var F=t(7910),G=t(9068),M=t(6651);function H(){var e;let[s,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(null),[c,i]=(0,l.useState)(!0),[d,o]=(0,l.useState)(1),[x,m]=(0,l.useState)(0),[u,p]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),y=(0,l.useCallback)(async()=>{i(!0);try{let a=new URLSearchParams({page:d.toString(),limit:"20"});u&&a.append("source",u),g&&a.append("ip",g);let l=await (0,j.ex)(a.toString());if(l){var e,s;let a=(null==(e=l.data)?void 0:e.items)||[],r=(null==(s=l.data)?void 0:s.pagination)||{};t(a),m(r.total||0)}let r=await (0,j.GT)();r&&r.success&&r.data&&n({total:r.data.total_ips||0,by_source:r.data.by_source||{},by_country:r.data.by_country||{},by_reason:r.data.by_reason||{}})}catch(e){console.error("Failed to fetch data:",e)}finally{i(!1)}},[d,u,g]);(0,l.useEffect)(()=>{y()},[y]);let N=Math.ceil(x/20),f=e=>e&&"UNKNOWN"!==e&&2===e.length?String.fromCodePoint(...e.toUpperCase().split("").map(e=>127397+e.charCodeAt(0))):"\uD83C\uDF10";return c?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"데이터 로딩 중..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(F.A,{className:"h-8 w-8 opacity-80"}),(0,a.jsx)("span",{className:"text-3xl font-bold",children:(null==r?void 0:r.total)||0})]}),(0,a.jsx)("p",{className:"text-blue-100 text-sm mt-2",children:"총 블랙리스트 IP"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl p-4 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(k.A,{className:"h-8 w-8 opacity-80"}),(0,a.jsx)("span",{className:"text-3xl font-bold",children:(null==r||null==(e=r.by_source)?void 0:e.REGTECH)||0})]}),(0,a.jsx)("p",{className:"text-pink-100 text-sm mt-2",children:"REGTECH 수집"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(G.A,{className:"h-8 w-8 opacity-80"}),(0,a.jsx)("span",{className:"text-3xl font-bold",children:(null==r?void 0:r.by_country)?Object.keys(r.by_country).length:0})]}),(0,a.jsx)("p",{className:"text-green-100 text-sm mt-2",children:"탐지 국가 수"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(w.A,{className:"h-8 w-8 opacity-80"}),(0,a.jsx)("span",{className:"text-3xl font-bold",children:(null==r?void 0:r.by_reason)?Object.keys(r.by_reason).length:0})]}),(0,a.jsx)("p",{className:"text-purple-100 text-sm mt-2",children:"위협 유형"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"수집된 IP 목록"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(M.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"IP 검색...",value:g,onChange:e=>b(e.target.value),className:"pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"모든 소스"}),(0,a.jsx)("option",{value:"REGTECH",children:"REGTECH"}),(0,a.jsx)("option",{value:"MANUAL",children:"수동 등록"})]}),(0,a.jsx)("button",{onClick:y,className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-600",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"IP 주소"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"소스"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"국가"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"위협 유형"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"탐지일"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center font-medium",children:"상태"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:s.map(e=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"px-4 py-3 font-mono text-blue-600",children:e.ip_address}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("REGTECH"===e.source?"bg-pink-100 text-pink-800":"bg-gray-100 text-gray-800"),children:e.source})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-lg",children:f(e.country)}),(0,a.jsx)("span",{className:"text-gray-600",children:e.country||"-"})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat((null==(s=e.reason)?void 0:s.includes("SQL"))?"bg-red-100 text-red-800":(null==s?void 0:s.includes("WordPress"))?"bg-orange-100 text-orange-800":(null==s?void 0:s.includes("공격"))?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.reason||"-"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.detection_date?new Date(e.detection_date).toLocaleDateString("ko-KR"):"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:e.is_active?(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:"활성"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600",children:"비활성"})})]},e.id)})})]})}),0===s.length&&(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)(F.A,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{children:"수집된 데이터가 없습니다"})]}),N>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["총 ",x.toLocaleString(),"개 중 ",(d-1)*20+1,"-",Math.min(20*d,x),"개 표시"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>o(e=>Math.max(1,e-1)),disabled:1===d,className:"p-2 rounded-lg border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(A.A,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[d," / ",N]}),(0,a.jsx)("button",{onClick:()=>o(e=>Math.min(N,e+1)),disabled:d===N,className:"p-2 rounded-lg border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]})]})]}),(null==r?void 0:r.by_country)&&Object.keys(r.by_country).length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"국가별 분포"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(r.by_country).sort((e,s)=>{let[,t]=e,[,a]=s;return a-t}).slice(0,20).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-lg",children:f(s)}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:s}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",t,")"]})]},s)})})]})]})}var P=t(209),D=t(2491),I=t(3136);function U(){let[e,s]=(0,l.useState)("management"),t=[{id:"management",label:"수집 관리",icon:r.A},{id:"data",label:"수집 데이터",icon:n.A},{id:"credentials",label:"인증정보",icon:c.A},{id:"history",label:"수집 이력",icon:i.A}];return(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)(P.A,{title:"데이터 수집",description:"REGTECH 데이터 수집 관리 및 이력",icon:d.A}),(0,a.jsx)(D.A,{tabs:t,activeTab:e,onChange:s}),(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(I.A,{message:"데이터 로딩 중..."}),children:"management"===e?(0,a.jsx)(N,{}):"data"===e?(0,a.jsx)(H,{}):"credentials"===e?(0,a.jsx)(O,{}):(0,a.jsx)(S,{})})]})}},2491:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(5155);function l(e){let{tabs:s,activeTab:t,onChange:l,variant:r="underline","aria-label":n="Tabs","data-testid":c="tabs"}=e;return"pills"===r?(0,a.jsx)("div",{role:"tablist","aria-label":n,className:"flex space-x-2 mb-6","data-testid":c,children:s.map(e=>{let s=e.icon,r=t===e.id;return(0,a.jsxs)("button",{type:"button",role:"tab","aria-selected":r,"aria-controls":"panel-".concat(e.id),onClick:()=>l(e.id),className:"px-4 py-2 rounded-lg font-medium text-sm flex items-center transition ".concat(r?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[s&&(0,a.jsx)(s,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),e.label]},e.id)})}):"boxed"===r?(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-6","data-testid":c,children:(0,a.jsx)("div",{role:"tablist","aria-label":n,className:"flex border-b border-gray-200",children:s.map(e=>{let s=e.icon,r=t===e.id;return(0,a.jsxs)("button",{type:"button",role:"tab","aria-selected":r,"aria-controls":"panel-".concat(e.id),onClick:()=>l(e.id),className:"flex-1 px-6 py-4 text-sm font-medium transition flex items-center justify-center ".concat(r?"bg-blue-50 text-blue-700 border-b-2 border-blue-500":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[s&&(0,a.jsx)(s,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),e.label]},e.id)})})}):(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6","data-testid":c,children:(0,a.jsx)("div",{role:"tablist","aria-label":n,className:"flex space-x-8",children:s.map(e=>{let s=e.icon,r=t===e.id;return(0,a.jsxs)("button",{type:"button",role:"tab","aria-selected":r,"aria-controls":"panel-".concat(e.id),onClick:()=>l(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center transition ".concat(r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s&&(0,a.jsx)(s,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),e.label]},e.id)})})})}},3136:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(5155),l=t(9559);function r(e){let{message:s="로딩 중...",size:t="md"}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(l.A,{className:"".concat({sm:"h-5 w-5",md:"h-8 w-8",lg:"h-12 w-12"}[t]," animate-spin text-blue-500")}),s&&(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:s})]})}},4877:(e,s,t)=>{Promise.resolve().then(t.bind(t,2416))},7621:(e,s,t)=>{"use strict";t.d(s,{$I:()=>w,Ab:()=>C,DT:()=>o,Dq:()=>b,GT:()=>n,Lz:()=>v,Ml:()=>i,PH:()=>_,Rq:()=>u,SI:()=>g,V7:()=>A,VO:()=>k,_n:()=>y,ex:()=>m,g5:()=>x,iy:()=>c,jN:()=>d,mT:()=>S,nZ:()=>p,o5:()=>N,qS:()=>f,qf:()=>E,rr:()=>j,w_:()=>h});var a=t(5125);let l=a.A.create({baseURL:"/api",timeout:6e4,headers:{"Content-Type":"application/json","Cache-Control":"no-store",Pragma:"no-cache",Expires:"0"}}),r=a.A.create({baseURL:"/api",timeout:3e5,headers:{"Content-Type":"application/json"}}),n=async()=>{let{data:e}=await l.get("/dashboard/stats");return e},c=async()=>{let{data:e}=await l.get("/dashboard/status");return e},i=async e=>{let{data:s}=await l.get(e?"/ip-management/whitelist?".concat(e):"/ip-management/whitelist");return s},d=async()=>{let{data:e}=await l.get("/collection/status");return e},o=async e=>{let{data:s}=await l.get(e?"/collection/history?".concat(e):"/collection/history");return s},x=async()=>{let{data:e}=await l.get("/collection/statistics");return e},m=async e=>{let{data:s}=await l.get(e?"/ip-management/blacklist?".concat(e):"/ip-management/blacklist");return s},u=async()=>{let{data:e}=await l.get("/blacklist/stats");return e},h=async e=>{let{data:s}=await l.get("/collection/credentials/".concat(e));return s},p=async(e,s)=>{let{data:t}=await l.put("/collection/credentials/".concat(e),s);return t},g=async e=>{let{data:s}=await l.post("/collection/credentials/".concat(e,"/test"));return s},b=async()=>{let{data:e}=await l.get("/database/tables");return e},j=async()=>{let{data:e}=await l.get("/database/schema");return e},y=async(e,s)=>{let t=s?"/database/table/".concat(e,"?").concat(s):"/database/table/".concat(e),{data:a}=await l.get(t);return a},N=async e=>{let{data:s}=await l.get(e?"/fortinet/active-ips?".concat(e):"/fortinet/active-ips");return s},f=async e=>{let{data:s}=await l.get(e?"/fortinet/pull-logs?".concat(e):"/fortinet/pull-logs");return s},v=async()=>await l.get("/fortinet/blocklist",{responseType:"text",transformResponse:[e=>{try{return JSON.parse(e)}catch(s){return e}}]}),w=async e=>{let{data:s}=await l.get(e?"/ip-management/unified?".concat(e):"/ip-management/unified");return s},k=async(e,s)=>{let{data:t}=await l.post("/ip-management/".concat(e),s);return t},_=async(e,s,t)=>{let{data:a}=await l.put("/ip-management/".concat(e,"/").concat(s),t);return a},A=async(e,s)=>{let{data:t}=await l.delete("/ip-management/".concat(e,"/").concat(s));return t},C=async e=>(await l.get(e?"/blacklist/export-raw?".concat(e):"/blacklist/export-raw",{responseType:"blob"})).data,S=async(e,s)=>{let{data:t}=await r.post("/collection/".concat(e,"/trigger"),s||{});return t},E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,{data:s}=await l.get("/analytics/detection-timeline?days=".concat(e));return s}}},e=>{e.O(0,[211,554,441,255,358],()=>e(e.s=4877)),_N_E=e.O()}]);